{"version":3,"sources":["product.js"],"names":["fs","require","path","p","join","dirname","process","mainModule","filename","getProductsFromFile","cb","readFile","err","fileContent","JSON","parse","module","exports","id","title","imageUrl","description","price","products","existingProductIndex","findIndex","prod","updatedProducts","writeFile","stringify","console","log","Math","random","toString","push","product","find"],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB,C,CAEA;;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB,C,CAEA;;;AACA,IAAME,CAAC,GAAGD,IAAI,CAACE,IAAL,CACRF,IAAI,CAACG,OAAL,CAAaC,OAAO,CAACC,UAAR,CAAmBC,QAAhC,CADQ,EAER,MAFQ,EAEA,eAFA,CAAV,C,CAIA;;AACA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAC,EAAE,EAAI;AAChCV,EAAAA,EAAE,CAACW,QAAH,CAAYR,CAAZ,EAAe,UAACS,GAAD,EAAMC,WAAN,EAAsB;AACnC,QAAID,GAAJ,EAAS;AACPF,MAAAA,EAAE,CAAC,EAAD,CAAF;AACD,KAFD,MAEO;AACLA,MAAAA,EAAE,CAACI,IAAI,CAACC,KAAL,CAAWF,WAAX,CAAD,CAAF;AACD;AACF,GAND;AAOD,CARD,C,CAUA;;;AACAG,MAAM,CAACC,OAAP;AAAA;AAAA;AACE,mBAAaC,EAAb,EAAiBC,KAAjB,EAAwBC,QAAxB,EAAkCC,WAAlC,EAA+CC,KAA/C,EAAsD;AAAA;;AACpD,SAAKJ,EAAL,GAAUA,EAAV;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,KAAL,GAAaA,KAAb;AACD,GAPH,CASE;;;AATF;AAAA;AAAA,2BAUU;AAAA;;AACNb,MAAAA,mBAAmB,CAAC,UAAAc,QAAQ,EAAI;AAC9B,YAAI,KAAI,CAACL,EAAT,EAAa;AACX,cAAMM,oBAAoB,GAAGD,QAAQ,CAACE,SAAT,CAAmB,UAAAC,IAAI;AAAA,mBAAIA,IAAI,CAACR,EAAL,KAAY,KAAI,CAACA,EAArB;AAAA,WAAvB,CAA7B;;AACA,cAAMS,eAAe,sBAAOJ,QAAP,CAArB;;AACAI,UAAAA,eAAe,CAACH,oBAAD,CAAf,GAAwC,KAAxC;AACAxB,UAAAA,EAAE,CAAC4B,SAAH,CAAazB,CAAb,EAAgBW,IAAI,CAACe,SAAL,CAAeF,eAAf,CAAhB,EAAiD,UAACf,GAAD,EAAS;AACxDkB,YAAAA,OAAO,CAACC,GAAR,CAAYnB,GAAZ;AACD,WAFD;AAGD,SAPD,MAOO;AACL,UAAA,KAAI,CAACM,EAAL,GAAUc,IAAI,CAACC,MAAL,GAAcC,QAAd,EAAV;AACAX,UAAAA,QAAQ,CAACY,IAAT,CAAc,KAAd;AACAnC,UAAAA,EAAE,CAAC4B,SAAH,CAAazB,CAAb,EAAgBW,IAAI,CAACe,SAAL,CAAeN,QAAf,CAAhB,EAA0C,UAACX,GAAD,EAAS;AACjDkB,YAAAA,OAAO,CAACC,GAAR,CAAYnB,GAAZ;AACD,WAFD;AAGD;AACF,OAfkB,CAAnB;AAgBD,KA3BH,CA6BE;;AA7BF;AAAA;AAAA,6BA8BmBF,EA9BnB,EA8BuB;AACnBD,MAAAA,mBAAmB,CAACC,EAAD,CAAnB;AACD;AAhCH;AAAA;AAAA,6BAkCmBQ,EAlCnB,EAkCuBR,EAlCvB,EAkC2B;AACvBD,MAAAA,mBAAmB,CAAC,UAAAc,QAAQ,EAAI;AAC9B,YAAMa,OAAO,GAAGb,QAAQ,CAACc,IAAT,CAAc,UAAAlC,CAAC;AAAA,iBAAIA,CAAC,CAACe,EAAF,KAASA,EAAb;AAAA,SAAf,CAAhB;AACAR,QAAAA,EAAE,CAAC0B,OAAD,CAAF;AACD,OAHkB,CAAnB;AAID;AAvCH;;AAAA;AAAA","sourcesContent":["// fs constant is holding a  a File object\r\nconst fs = require('fs')\r\n\r\n// path constant is holding a required path object, providing a location to access\r\nconst path = require('path')\r\n\r\n// will write data content to products.json file\r\nconst p = path.join(\r\n  path.dirname(process.mainModule.filename),\r\n  'data', 'products.json')\r\n\r\n// call back function to read file content\r\nconst getProductsFromFile = cb => {\r\n  fs.readFile(p, (err, fileContent) => {\r\n    if (err) {\r\n      cb([])\r\n    } else {\r\n      cb(JSON.parse(fileContent))\r\n    }\r\n  })\r\n}\r\n\r\n// exports a product object with all relevant data: title, imgUrl, description, price\r\nmodule.exports = class Product {\r\n  constructor (id, title, imageUrl, description, price) {\r\n    this.id = id\r\n    this.title = title\r\n    this.imageUrl = imageUrl\r\n    this.description = description\r\n    this.price = price\r\n  }\r\n\r\n  // writes product object data as a string to a file\r\n  save () {\r\n    getProductsFromFile(products => {\r\n      if (this.id) {\r\n        const existingProductIndex = products.findIndex(prod => prod.id === this.id)\r\n        const updatedProducts = [...products]\r\n        updatedProducts[existingProductIndex] = this\r\n        fs.writeFile(p, JSON.stringify(updatedProducts), (err) => {\r\n          console.log(err)\r\n        })\r\n      } else {\r\n        this.id = Math.random().toString()\r\n        products.push(this)\r\n        fs.writeFile(p, JSON.stringify(products), (err) => {\r\n          console.log(err)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  // similar to a utility function that calls not on a single instance of an object but retrieves all data from object.\r\n  static fetchall (cb) {\r\n    getProductsFromFile(cb)\r\n  }\r\n\r\n  static findById (id, cb) {\r\n    getProductsFromFile(products => {\r\n      const product = products.find(p => p.id === id)\r\n      cb(product)\r\n    })\r\n  }\r\n}\r\n"],"file":"product.dev.js"}