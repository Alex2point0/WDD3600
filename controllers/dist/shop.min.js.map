{"version":3,"sources":["shop.js"],"names":["Product","require","exports","getProducts","req","res","next","fetchall","products","prods","getProduct","prodId","params","productId","product","console","log","getIndex","getCart","render","postCart","body","Cart","price","addProduct","getOrders","getCheckout"],"mappings":"aACA,IAAMA,QAAUC,QAAQ,qBAAlBD,KAAOC,QAAU,kBAKvBC,QAAQC,YAAc,SAACC,EAAKC,EAAKC,GAC/BN,QAAQO,SAAS,SAACC,GADpBN,EAAQC,OAAAA,oBAAc,CACpBH,MAAQO,EACNF,UAAW,eACTI,KAAK,iBAQXP,QAAQQ,WAAa,SAACN,EAAKC,EAAKC,GAC9B,IAAMK,EAASP,EAAIQ,OAAOC,UAD5BX,QAAQQ,SAARC,EAAqB,SAAAG,GACnBC,QAAYC,IAAGZ,KAEbW,EAAAA,SAAA,MAMJb,QAAQe,SAAW,SAACb,EAAKC,EAAKC,GAC5BN,QAAQO,SAAS,SAACC,GADpBN,EAAQe,OAAAA,aAAYb,CAClBJ,MAAQO,EACNF,UAAW,OACTI,KAAK,SAQXP,QAAQgB,QAAU,SAACd,EAAKC,EAAKC,GAC3BD,EAAIc,OAAO,YAAa,CAD1BjB,UAAA,YACEG,KAAIc,WAONjB,QAAQkB,SAAW,SAAChB,EAAKC,EAAKC,GAC5B,IAAMK,EAASP,EAAIiB,KAAKR,UAD1BX,QAAQkB,SAAWT,EAAA,SAAAG,GACjBQ,KAAMX,WAAaU,EAAKR,EAAxBU,SAEED,EAAAA,SAAKE,UAMTtB,QAAQuB,UAAY,SAACrB,EAAKC,EAAKC,GAC7BD,EAAIc,OAAO,cAAe,CAD5BjB,UAAQuB,cACNpB,KAAIc,aAONjB,QAAQwB,YAAc,SAACtB,EAAKC,EAAKC,GAC/BD,EAAIc,OAAO,gBAAiB,CAD9BjB,UAAQwB,WACNrB,KAAIc","file":"shop.min.js","sourcesContent":["// constant holding required product location\r\nconst Product = require('../models/product')\r\n\r\nconst Cart = require('../models/cart')\r\n\r\n// export function to get all products\r\nexports.getProducts = (req, res, next) => {\r\n  Product.fetchall((products) => {\r\n    res.render('shop/product-list', {\r\n      prods: products,\r\n      pageTitle: 'All Products',\r\n      path: '/products'\r\n    })\r\n  })\r\n}\r\n\r\n// export function to get singular product\r\nexports.getProduct = (req, res, next) => {\r\n  const prodId = req.params.productId\r\n  Product.findById(prodId, product => {\r\n    console.log(product)\r\n  })\r\n  res.redirect('/')\r\n}\r\n\r\n// export function to get content for shop page\r\nexports.getIndex = (req, res, next) => {\r\n  Product.fetchall((products) => {\r\n    res.render('shop/index', {\r\n      prods: products,\r\n      pageTitle: 'Shop',\r\n      path: '/'\r\n    })\r\n  })\r\n}\r\n\r\n// export function to get content for cart page\r\nexports.getCart = (req, res, next) => {\r\n  res.render('shop/cart', {\r\n    pageTitle: 'Your Cart',\r\n    path: '/cart'\r\n  })\r\n}\r\n\r\n// export function to get content for cart page\r\nexports.postCart = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  Product.findById(prodId, (product) => {\r\n    Cart.addProduct(prodId, product.price)\r\n  })\r\n  res.redirect('/cart')\r\n}\r\n\r\n// export function to get content for orders page\r\nexports.getOrders = (req, res, next) => {\r\n  res.render('shop/orders', {\r\n    pageTitle: 'Your Orders',\r\n    path: '/orders'\r\n  })\r\n}\r\n\r\n// export function to get content for checkout page\r\nexports.getCheckout = (req, res, next) => {\r\n  res.render('shop/checkout', {\r\n    pageTitle: 'Checkout',\r\n    path: '/checkout'\r\n  })\r\n}\r\n"]}