"use strict";var Product=require("../models/product");exports.getAddProduct=function(d,t,r){t.render("admin/edit-product",{pageTitle:"Add Product",path:"/admin/add-product",editing:!1})},exports.postAddProduct=function(d,t,r){var e=d.body.title,o=d.body.imageUrl,c=d.body.price,i=d.body.description;new Product(null,e,o,i,c).save().then(function(){t.direct("/")}).catch(function(d){return console.log(d)})},exports.getEditProduct=function(d,t,r){var e=d.query.edit;if(!e)return t.redirect("/");var o=d.params.productId;Product.findById(o,function(d){if(!d)return t.redirect("/");t.render("admin/edit-product",{pageTitle:"Add Product",path:"/admin/add-product",editing:e,product:d})})},exports.postEditProduct=function(d,t,r){var e=d.body.productId,o=d.body.title,c=d.body.price,i=d.body.imageUrl,n=d.body.description;new Product(e,o,i,n,c).save(),t.redirect("/admin/products")},exports.getProducts=function(d,t,r){Product.fetchall(function(d){t.render("admin/products",{prods:d,pageTitle:"Admin Products",path:"/admin/products"})})},exports.postDeleteProduct=function(d,t,r){var e=d.body.productId;Product.deleteById(e),t.redirect("/admin/products")};
//# sourceMappingURL=admin.min.js.map
