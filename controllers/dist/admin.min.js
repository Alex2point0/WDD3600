"use strict";var Product=require("../models/product");exports.getAddProduct=function(t,o,d){o.render("admin/edit-product",{pageTitle:"Add Product",path:"/admin/add-product",editing:!1})},exports.postAddProduct=function(t,o,d){var r=t.body.title,e=t.body.imageUrl,c=t.body.price,n=t.body.description;new Product(r,c,n,e,null,t.user._id).save().then(function(t){console.log("Created Product"),o.redirect("/admin/products")}).catch(function(t){console.log(t)})},exports.getEditProduct=function(t,d,o){var r=t.query.edit;if(!r)return d.redirect("/");var e=t.params.productId;Product.findByPk(e).then(function(t){var o=t[0];if(!o)return d.redirect("/");d.render("admin/edit-product",{pageTitle:"Edit Product",path:"/admin/edit-product",editing:r,product:o})}).catch(function(t){return console.log(t)})},exports.postEditProduct=function(t,o,d){var r=t.body.productId,e=t.body.title,c=t.body.price,n=t.body.imageUrl,i=t.body.description;new Product(e,c,i,n,r).save().then(function(t){console.log("Updated Product!"),o.redirect("/admin/products")}).catch(function(t){return console.log(t)})},exports.getProducts=function(t,o,d){Product.fetchAll().then(function(t){o.render("admin/products",{prods:t,pageTitle:"Admin Products",path:"/admin/products"})}).catch(function(t){console.log(t)})},exports.postDeleteProduct=function(t,o,d){var r=t.body.productId;Product.deleteById(r).then(function(){console.log("Destroyed Product!"),o.redirect("/admin/products")}).catch(function(t){return console.log(t)})};
//# sourceMappingURL=admin.min.js.map
