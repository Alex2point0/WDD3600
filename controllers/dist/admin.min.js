"use strict";var _require=require("express/lib/response"),redirect=_require.redirect,Product=require("../models/product");exports.getAddProduct=function(t,e,r){e.render("admin/edit-product",{pageTitle:"Add Product",path:"/admin/add-product",editing:!1})},exports.postAddProduct=function(t,e,r){var o=t.body.title,d=t.body.imageUrl,c=t.body.price,i=t.body.description;t.user.createProduct({title:o,price:c,imageUrl:d,description:i}).then(function(t){console.log(t),e.redirect("/admin/products")}).catch(function(t){console.log(t)})},exports.getEditProduct=function(t,r,e){var o=t.query.edit;if(!o)return r.redirect("/");var d=t.params.productId;t.user.getProducts({where:{id:d}}).then(function(t){var e=t[0];if(!e)return r.redirect("/");r.render("admin/edit-product",{pageTitle:"Edit Product",path:"/admin/edit-product",editing:o,product:e})}).catch(function(t){return console.log(t)})},exports.postEditProduct=function(t,e,r){var o=t.body.productId,d=t.body.title,c=t.body.price,i=t.body.imageUrl,n=t.body.description;Product.findById(o).then(function(t){return t.title=d,t.price=c,t.description=n,t.imageUrl=i,t.save()}).then(function(t){console.log("Updated Product!"),e.redirect("/admin/products")}).catch(function(t){return console.log(t)})},exports.getProducts=function(t,e,r){t.user.getProducts().then(function(t){e.render("admin/products",{prods:t,pageTitle:"Admin Products",path:"/admin/products"})}).catch(function(t){console.log(t)})},exports.postDeleteProduct=function(t,e,r){var o=t.body.productId;Product.findById(o).then(function(t){return t.destroy()}).then(function(t){console.log("Destroyed Product!"),e.redirect("/admin/products")}).catch(function(t){return console.log(t)})};
//# sourceMappingURL=admin.min.js.map
