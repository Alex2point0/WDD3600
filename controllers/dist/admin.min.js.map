{"version":3,"sources":["admin.js"],"names":["Product","require","exports","req","res","next","render","getAddProduct","pageTitle","postAddProduct","title","body","imageUrl","description","price","product","getEditProduct","editMode","query","edit","redirect","params","productId","findById","path","editing","prodId","updatedTitle","updatedPrice","updatedImageUrl","postEditProduct","updatedDesc","updatedProduct","save","prods","products","getProducts","deleteById"],"mappings":"aAAA,IAAMA,QAAUC,QAAQ,qBAAxBC,QAAMF,cAAkB,SAAAG,EAAAC,EAAAC,GAGtBD,EAAIE,OAAO,qBAAsB,CADnCJ,UAAQK,cACNH,KAAIE,qBACFE,SAAS,KAIZN,QANDO,eAAA,SAAAN,EAAAC,EAAAC,GASE,IAAMK,EAAQP,EAAIQ,KAAKD,MADjBD,EAAAA,EAARE,KAAyBC,SACjBF,EAAQP,EAAIQ,KAAKD,MACjBE,EAAeD,EAAKC,KAAAA,YACRD,IAAJX,QAAd,KAAAU,EAAAE,EAAAC,EAAAC,GACMD,OACNT,EAAMW,SAAO,MAGdb,QARDc,eAAA,SAAAb,EAAAC,EAAAC,GAWE,IAAMY,EAAWd,EAAIe,MAAMC,KAD7BjB,IAAOe,EACL,OAAMA,EAAQG,SAAOF,KACrB,IAAKD,EAAUd,EAAAkB,OAAAC,UACbtB,QAAAuB,SAAWH,EAAJ,SAAAL,GACR,IAAAA,EAIG,OAAOX,EAAIgB,SAAS,KAFxBpB,EAAAA,OAAQuB,qBAAiBR,CACvBP,UAAA,cACEgB,KAAA,qBACDC,QAAAR,EAKCF,QAASA,OAATA,QAAAA,gBAASA,SAAAA,EAAAA,EAAAA,GAJsB,IAAjCW,EAAAvB,EAAAQ,KAAAW,UAJFK,EAAAxB,EAAAQ,KAAAD,MANFkB,EAAAzB,EAAAQ,KAAAG,MAuBQe,EAAkB1B,EAAIQ,KAAKC,SAJ3BkB,EAAAA,EAAkBnB,KAAAE,YACAS,IAAAA,QAAxBI,EAAAC,EAAAE,EAAAE,EAAAH,GACMD,OACNvB,EAAMwB,SAAAA,oBAGN1B,QAAM8B,YAAc,SAAG7B,EAAIH,EAAAA,GAC3BgC,QAAAA,SAAeC,SAAAA,GACf7B,EAAIgB,OAAS,iBAAb,CARFc,MAAAC,EAeM3B,UAAW,iBAJjBN,KAAQkC,uBAKFZ,QAAAA,kBAAM,SAAArB,EAAAC,EAAAC,GAHqB,IAA7BqB,EAAAvB,EAAAQ,KAAAW,UAKDtB,QANDqC,WAAAX,GADFtB,EAAAgB,SAAA","file":"admin.min.js","sourcesContent":["const Product = require('../models/product')\r\n\r\nexports.getAddProduct = (req, res, next) => {\r\n  res.render('admin/edit-product', {\r\n    pageTitle: 'Add Product',\r\n    path: '/admin/add-product',\r\n    editing: false\r\n  })\r\n}\r\n\r\nexports.postAddProduct = (req, res, next) => {\r\n  const title = req.body.title\r\n  const imageUrl = req.body.imageUrl\r\n  const price = req.body.price\r\n  const description = req.body.description\r\n  const product = new Product(null, title, imageUrl, description, price)\r\n  product.save()\r\n  res.redirect('/')\r\n}\r\n\r\nexports.getEditProduct = (req, res, next) => {\r\n  const editMode = req.query.edit\r\n  if (!editMode) {\r\n    return res.redirect('/')\r\n  }\r\n  const prodId = req.params.productId\r\n  Product.findById(prodId, product => {\r\n    if (!product) {\r\n      return res.redirect('/')\r\n    }\r\n    res.render('admin/edit-product', {\r\n      pageTitle: 'Add Product',\r\n      path: '/admin/add-product',\r\n      editing: editMode,\r\n      product: product\r\n    })\r\n  })\r\n}\r\n\r\nexports.postEditProduct = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  const updatedTitle = req.body.title\r\n  const updatedPrice = req.body.price\r\n  const updatedImageUrl = req.body.imageUrl\r\n  const updatedDesc = req.body.description\r\n  const updatedProduct = new Product(prodId, updatedTitle, updatedImageUrl, updatedDesc, updatedPrice)\r\n  updatedProduct.save()\r\n  res.redirect('/admin/products')\r\n}\r\n\r\nexports.getProducts = (req, res, next) => {\r\n  Product.fetchall((products) => {\r\n    res.render('admin/products', {\r\n      prods: products,\r\n      pageTitle: 'Admin Products',\r\n      path: '/admin/products'\r\n    })\r\n  })\r\n}\r\n\r\nexports.postDeleteProduct = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  Product.deleteById(prodId)\r\n  res.redirect('/admin/products')\r\n}\r\n"]}