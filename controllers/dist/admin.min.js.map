{"version":3,"sources":["admin.js"],"names":["Product","require","exports","req","res","next","render","getAddProduct","pageTitle","postAddProduct","title","body","imageUrl","description","price","then","product","save","err","console","getEditProduct","editMode","query","edit","redirect","params","productId","findById","path","editing","prodId","updatedTitle","updatedPrice","updatedImageUrl","postEditProduct","updatedDesc","updatedProduct","prods","products","getProducts","deleteById"],"mappings":"aAAA,IAAMA,QAAUC,QAAQ,qBAAxBC,QAAMF,cAAkB,SAAAG,EAAAC,EAAAC,GAGtBD,EAAIE,OAAO,qBAAsB,CADnCJ,UAAQK,cACNH,KAAIE,qBACFE,SAAS,KAIZN,QANDO,eAAA,SAAAN,EAAAC,EAAAC,GASE,IAAMK,EAAQP,EAAIQ,KAAKD,MADjBD,EAAAA,EAARE,KAAyBC,SACjBF,EAAQP,EAAIQ,KAAKD,MACjBE,EAAeD,EAAKC,KAAAA,YACRD,IAAJX,QAAd,KAAAU,EAAAE,EAAAC,EAAAC,GACMD,OACNE,KAAMC,WACNA,EAAQC,OACLF,OAHH,MAEA,SAAAG,GAIS,OAAAC,QAAAD,IAAGA,MACbhB,QAXDkB,eAAA,SAAAjB,EAAAC,EAAAC,GAcE,IAAMgB,EAAWlB,EAAImB,MAAMC,KAD7BrB,IAAOmB,EACL,OAAMA,EAAQG,SAAOF,KACrB,IAAKD,EAAUlB,EAAAsB,OAAAC,UACb1B,QAAA2B,SAAWH,EAAJ,SAAAR,GACR,IAAAA,EAIG,OAAOZ,EAAIoB,SAAS,KAFxBxB,EAAAA,OAAQ2B,qBAAiBX,CACvBR,UAAA,cACEoB,KAAA,qBACDC,QAAAR,EAKCL,QAASA,OAATA,QAAAA,gBAASA,SAAAA,EAAAA,EAAAA,GAJsB,IAAjCc,EAAA3B,EAAAQ,KAAAe,UAJFK,EAAA5B,EAAAQ,KAAAD,MANFsB,EAAA7B,EAAAQ,KAAAG,MAuBQmB,EAAkB9B,EAAIQ,KAAKC,SAJ3BsB,EAAAA,EAAkBvB,KAAAE,YACAa,IAAAA,QAAxBI,EAAAC,EAAAE,EAAAE,EAAAH,GACMD,OACN3B,EAAM4B,SAAAA,oBAGN9B,QAAMkC,YAAc,SAAGjC,EAAIH,EAAAA,GAC3BoC,QAAAA,SAAenB,SAAAA,GACfb,EAAIoB,OAAS,iBAAb,CARFa,MAAAC,EAeM9B,UAAW,iBAJjBN,KAAQqC,uBAKFX,QAAAA,kBAAM,SAAAzB,EAAAC,EAAAC,GAHqB,IAA7ByB,EAAA3B,EAAAQ,KAAAe,UAKD1B,QANDwC,WAAAV,GADF1B,EAAAoB,SAAA","file":"admin.min.js","sourcesContent":["const Product = require('../models/product')\r\n\r\nexports.getAddProduct = (req, res, next) => {\r\n  res.render('admin/edit-product', {\r\n    pageTitle: 'Add Product',\r\n    path: '/admin/add-product',\r\n    editing: false\r\n  })\r\n}\r\n\r\nexports.postAddProduct = (req, res, next) => {\r\n  const title = req.body.title\r\n  const imageUrl = req.body.imageUrl\r\n  const price = req.body.price\r\n  const description = req.body.description\r\n  const product = new Product(null, title, imageUrl, description, price)\r\n  product.save()\r\n    .then(() => {\r\n      res.direct('/')\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexports.getEditProduct = (req, res, next) => {\r\n  const editMode = req.query.edit\r\n  if (!editMode) {\r\n    return res.redirect('/')\r\n  }\r\n  const prodId = req.params.productId\r\n  Product.findById(prodId, product => {\r\n    if (!product) {\r\n      return res.redirect('/')\r\n    }\r\n    res.render('admin/edit-product', {\r\n      pageTitle: 'Add Product',\r\n      path: '/admin/add-product',\r\n      editing: editMode,\r\n      product: product\r\n    })\r\n  })\r\n}\r\n\r\nexports.postEditProduct = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  const updatedTitle = req.body.title\r\n  const updatedPrice = req.body.price\r\n  const updatedImageUrl = req.body.imageUrl\r\n  const updatedDesc = req.body.description\r\n  const updatedProduct = new Product(prodId, updatedTitle, updatedImageUrl, updatedDesc, updatedPrice)\r\n  updatedProduct.save()\r\n  res.redirect('/admin/products')\r\n}\r\n\r\nexports.getProducts = (req, res, next) => {\r\n  Product.fetchall((products) => {\r\n    res.render('admin/products', {\r\n      prods: products,\r\n      pageTitle: 'Admin Products',\r\n      path: '/admin/products'\r\n    })\r\n  })\r\n}\r\n\r\nexports.postDeleteProduct = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  Product.deleteById(prodId)\r\n  res.redirect('/admin/products')\r\n}\r\n"]}