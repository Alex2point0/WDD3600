{"version":3,"sources":["admin.js"],"names":["Product","require","exports","getAddProduct","req","res","next","render","pageTitle","path","editing","postAddProduct","title","body","imageUrl","price","description","product","save","then","direct","err","console","log","getEditProduct","editMode","query","edit","redirect","prodId","params","productId","findById","postEditProduct","updatedTitle","updatedPrice","updatedImageUrl","updatedDesc","updatedProduct","getProducts","fetchall","products","prods","postDeleteProduct","deleteById"],"mappings":"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","sourcesContent":["const Product = require('../models/product')\r\n\r\nexports.getAddProduct = (req, res, next) => {\r\n  res.render('admin/edit-product', {\r\n    pageTitle: 'Add Product',\r\n    path: '/admin/add-product',\r\n    editing: false\r\n  })\r\n}\r\n\r\nexports.postAddProduct = (req, res, next) => {\r\n  const title = req.body.title\r\n  const imageUrl = req.body.imageUrl\r\n  const price = req.body.price\r\n  const description = req.body.description\r\n  const product = new Product(null, title, imageUrl, description, price)\r\n  product.save()\r\n    .then(() => {\r\n      res.direct('/')\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexports.getEditProduct = (req, res, next) => {\r\n  const editMode = req.query.edit\r\n  if (!editMode) {\r\n    return res.redirect('/')\r\n  }\r\n  const prodId = req.params.productId\r\n  Product.findById(prodId, product => {\r\n    if (!product) {\r\n      return res.redirect('/')\r\n    }\r\n    res.render('admin/edit-product', {\r\n      pageTitle: 'Add Product',\r\n      path: '/admin/add-product',\r\n      editing: editMode,\r\n      product: product\r\n    })\r\n  })\r\n}\r\n\r\nexports.postEditProduct = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  const updatedTitle = req.body.title\r\n  const updatedPrice = req.body.price\r\n  const updatedImageUrl = req.body.imageUrl\r\n  const updatedDesc = req.body.description\r\n  const updatedProduct = new Product(prodId, updatedTitle, updatedImageUrl, updatedDesc, updatedPrice)\r\n  updatedProduct.save()\r\n  res.redirect('/admin/products')\r\n}\r\n\r\nexports.getProducts = (req, res, next) => {\r\n  Product.fetchall((products) => {\r\n    res.render('admin/products', {\r\n      prods: products,\r\n      pageTitle: 'Admin Products',\r\n      path: '/admin/products'\r\n    })\r\n  })\r\n}\r\n\r\nexports.postDeleteProduct = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  Product.deleteById(prodId)\r\n  res.redirect('/admin/products')\r\n}\r\n"],"file":"admin.dev.js"}