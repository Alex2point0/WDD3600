{"version":3,"sources":["admin.js"],"names":["Product","require","exports","getAddProduct","req","res","next","render","pageTitle","path","editing","postAddProduct","title","body","imageUrl","price","description","product","save","redirect","getEditProduct","editMode","query","edit","prodId","params","productId","findById","postEditProduct","updatedTitle","updatedPrice","updatedImageUrl","updatedDesc","updatedProduct","getProducts","fetchall","products","prods","postDeleteProduct","deleteById"],"mappings":"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","sourcesContent":["const Product = require('../models/product')\r\n\r\nexports.getAddProduct = (req, res, next) => {\r\n  res.render('admin/edit-product', {\r\n    pageTitle: 'Add Product',\r\n    path: '/admin/add-product',\r\n    editing: false\r\n  })\r\n}\r\n\r\nexports.postAddProduct = (req, res, next) => {\r\n  const title = req.body.title\r\n  const imageUrl = req.body.imageUrl\r\n  const price = req.body.price\r\n  const description = req.body.description\r\n  const product = new Product(null, title, imageUrl, description, price)\r\n  product.save()\r\n  res.redirect('/')\r\n}\r\n\r\nexports.getEditProduct = (req, res, next) => {\r\n  const editMode = req.query.edit\r\n  if (!editMode) {\r\n    return res.redirect('/')\r\n  }\r\n  const prodId = req.params.productId\r\n  Product.findById(prodId, product => {\r\n    if (!product) {\r\n      return res.redirect('/')\r\n    }\r\n    res.render('admin/edit-product', {\r\n      pageTitle: 'Add Product',\r\n      path: '/admin/add-product',\r\n      editing: editMode,\r\n      product: product\r\n    })\r\n  })\r\n}\r\n\r\nexports.postEditProduct = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  const updatedTitle = req.body.title\r\n  const updatedPrice = req.body.price\r\n  const updatedImageUrl = req.body.imageUrl\r\n  const updatedDesc = req.body.description\r\n  const updatedProduct = new Product(prodId, updatedTitle, updatedImageUrl, updatedDesc, updatedPrice)\r\n  updatedProduct.save()\r\n  res.redirect('/admin/products')\r\n}\r\n\r\nexports.getProducts = (req, res, next) => {\r\n  Product.fetchall((products) => {\r\n    res.render('admin/products', {\r\n      prods: products,\r\n      pageTitle: 'Admin Products',\r\n      path: '/admin/products'\r\n    })\r\n  })\r\n}\r\n\r\nexports.postDeleteProduct = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  Product.deleteById(prodId)\r\n  res.redirect('/admin/products')\r\n}\r\n"],"file":"admin.dev.js"}