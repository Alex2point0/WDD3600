"use strict";var Product=require("../models/product"),Cart=require("../models/cart");exports.getProducts=function(t,r,o){Product.fetchall(function(t){r.render("shop/product-list",{prods:t,pageTitle:"All Products",path:"/products"})})},exports.getProduct=function(t,r,o){var e=t.params.productId;Product.findById(e,function(t){console.log(t)}),r.redirect("/")},exports.getIndex=function(t,r,o){Product.fetchall(function(t){r.render("shop/index",{prods:t,pageTitle:"Shop",path:"/"})})},exports.getCart=function(t,p,r){Cart.getCart(function(a){Product.fetchall(function(t){var r=[],o=!0,e=!1,c=void 0;try{for(var d,u=t[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){product=d.value;var n=a.products.find(function(t){return t.id===product.id});n&&r.push({productData:product,qty:n.qty})}}catch(t){e=!0,c=t}finally{try{o||null==u.return||u.return()}finally{if(e)throw c}}p.render("shop/cart",{pageTitle:"Your Cart",path:"/cart",products:r})})})},exports.postCart=function(t,r,o){var e=t.body.productId;Product.findById(e,function(t){Cart.addProduct(e,t.price)}),r.redirect("/cart")},exports.postCartDeleteProduct=function(t,r,o){var e=t.body.productId;Product.findById(e,function(t){Cart.deleteProduct(e,t.price),r.redirect("/cart")})},exports.getOrders=function(t,r,o){r.render("shop/orders",{pageTitle:"Your Orders",path:"/orders"})},exports.getCheckout=function(t,r,o){r.render("shop/checkout",{pageTitle:"Checkout",path:"/checkout"})};
//# sourceMappingURL=shop.min.js.map
