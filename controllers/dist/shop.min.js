"use strict";function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,r){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],o=!0,n=!1,c=void 0;try{for(var a,u=t[Symbol.iterator]();!(o=(a=u.next()).done)&&(e.push(a.value),!r||e.length!==r);o=!0);}catch(t){n=!0,c=t}finally{try{o||null==u.return||u.return()}finally{if(n)throw c}}return e}}function _arrayWithHoles(t){if(Array.isArray(t))return t}var Product=require("../models/product"),Cart=require("../models/cart");exports.getProducts=function(t,o,r){Product.fetchall().then(function(t){var r=_slicedToArray(t,2),e=r[0];r[1];o.render("shop/product-list",{prods:e,pageTitle:"All Products",path:"/products"})}).catch(function(t){return console.log(t)})},exports.getProduct=function(t,e,r){var o=t.params.productId;Product.findById(o).then(function(t){var r=_slicedToArray(t,1)[0];e.render("shop/product-detail",{product:r[0],pageTitle:r.title,path:"/products"})}).catch(function(t){return console.log(t)})},exports.getIndex=function(t,o,r){Product.fetchall().then(function(t){var r=_slicedToArray(t,2),e=r[0];r[1];o.render("shop/index",{prods:e,pageTitle:"Shop",path:"/"})}).catch(function(t){return console.log(t)})},exports.getCart=function(t,d,r){Cart.getCart(function(i){Product.fetchall(function(t){var r=[],e=!0,o=!1,n=void 0;try{for(var c,a=t[Symbol.iterator]();!(e=(c=a.next()).done);e=!0){product=c.value;var u=i.products.find(function(t){return t.id===product.id});u&&r.push({productData:product,qty:u.qty})}}catch(t){o=!0,n=t}finally{try{e||null==a.return||a.return()}finally{if(o)throw n}}d.render("shop/cart",{pageTitle:"Your Cart",path:"/cart",products:r})})})},exports.postCart=function(t,r,e){var o=t.body.productId;Product.findById(o,function(t){Cart.addProduct(o,t.price)}),r.redirect("/cart")},exports.postCartDeleteProduct=function(t,r,e){var o=t.body.productId;Product.findById(o,function(t){Cart.deleteProduct(o,t.price),r.redirect("/cart")})},exports.getOrders=function(t,r,e){r.render("shop/orders",{pageTitle:"Your Orders",path:"/orders"})},exports.getCheckout=function(t,r,e){r.render("shop/checkout",{pageTitle:"Checkout",path:"/checkout"})};
//# sourceMappingURL=shop.min.js.map
