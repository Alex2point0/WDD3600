{"version":3,"sources":["shop.js"],"names":["Product","require","Cart","exports","getProducts","req","res","next","fetchall","products","render","prods","pageTitle","path","getProduct","prodId","params","productId","findById","product","console","log","redirect","getIndex","getCart","cart","cartProducts","cartProductData","find","prod","id","push","productData","qty","postCart","body","addProduct","price","postCartDeleteProduct","deleteProduct","getOrders","getCheckout"],"mappings":"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","sourcesContent":["// constant holding required product location\r\nconst Product = require('../models/product')\r\n\r\nconst Cart = require('../models/cart')\r\n\r\n// export function to get all products\r\nexports.getProducts = (req, res, next) => {\r\n  Product.fetchall((products) => {\r\n    res.render('shop/product-list', {\r\n      prods: products,\r\n      pageTitle: 'All Products',\r\n      path: '/products'\r\n    })\r\n  })\r\n}\r\n\r\n// export function to get singular product\r\nexports.getProduct = (req, res, next) => {\r\n  const prodId = req.params.productId\r\n  Product.findById(prodId, product => {\r\n    console.log(product)\r\n  })\r\n  res.redirect('/')\r\n}\r\n\r\n// export function to get content for shop page\r\nexports.getIndex = (req, res, next) => {\r\n  Product.fetchall((products) => {\r\n    res.render('shop/index', {\r\n      prods: products,\r\n      pageTitle: 'Shop',\r\n      path: '/'\r\n    })\r\n  })\r\n}\r\n\r\n// export function to get content for cart page\r\nexports.getCart = (req, res, next) => {\r\n  Cart.getCart(cart => {\r\n    Product.fetchall(products => {\r\n      const cartProducts = []\r\n      for (product of products) {\r\n        const cartProductData = cart.products.find(prod => prod.id === product.id)\r\n        if (cartProductData) {\r\n          cartProducts.push({ productData: product, qty: cartProductData.qty })\r\n        }\r\n      }\r\n\r\n      res.render('shop/cart', {\r\n        pageTitle: 'Your Cart',\r\n        path: '/cart',\r\n        products: cartProducts\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\n// export function to get content for cart page\r\nexports.postCart = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  Product.findById(prodId, (product) => {\r\n    Cart.addProduct(prodId, product.price)\r\n  })\r\n  res.redirect('/cart')\r\n}\r\n\r\nexports.postCartDeleteProduct = (req, res, next) => {\r\n  const prodId = req.body.productId\r\n  Product.findById(prodId, product => {\r\n    Cart.deleteProduct(prodId, product.price)\r\n    res.redirect('/cart')\r\n  })\r\n}\r\n\r\n// export function to get content for orders page\r\nexports.getOrders = (req, res, next) => {\r\n  res.render('shop/orders', {\r\n    pageTitle: 'Your Orders',\r\n    path: '/orders'\r\n  })\r\n}\r\n\r\n// export function to get content for checkout page\r\nexports.getCheckout = (req, res, next) => {\r\n  res.render('shop/checkout', {\r\n    pageTitle: 'Checkout',\r\n    path: '/checkout'\r\n  })\r\n}\r\n"],"file":"shop.dev.js"}